function login_submit_done(o){if(console.log(o),200!=o.status){{var t=1*getParameterByName("failed");window.location}t++}else if(void 0!==o.responseJSON){var i=o.responseJSON,n="";n=i["return"]?i["return"]:window.location,i.extended&&(n+="?extended="+i.extended),window.location=n}}function login_submitted(o){var t=$("body").data("login-url");if(void 0===t){var i=$("script[src*=login]").attr("src"),n=i.split("/").pop();i=i.replace("/"+n,""),n=i.split("/").pop(),i=i.replace("/"+n,""),t=i+"/api/v1/login"}$.ajax({url:t,data:$(o).serialize(),type:"post",dataType:"json",complete:login_submit_done})}function login_dialog_shown(){$("[name=username]").focus()}function do_login_init(){var o=$(".links a[href*='login']");browser_supports_cors()?(o.attr("data-toggle","modal"),o.attr("data-target","#login-dialog"),o.removeAttr("href"),o.css("cursor","pointer"),o=$("#content a[href*='login']"),o.attr("data-toggle","modal"),o.attr("data-target","#login-dialog"),o.removeAttr("href"),o.css("cursor","pointer")):o.attr("href",o.attr("href")+"?return="+document.URL),$("#login_main_form").length>0&&$("#login_main_form").validate({submitHandler:login_submitted}),$("#login_dialog_form").length>0&&$("#login_dialog_form").validate({submitHandler:login_submitted}),$("#login-dialog").length>0&&($("#login-dialog").modal({show:!1,backdrop:"static"}),$("#login-dialog").on("shown.bs.modal",login_dialog_shown))}$(do_login_init);
