function loginSubmitted(t){t.preventDefault();let e=document.body.dataset.loginUrl;if(void 0===e){let o=document.querySelector("script[src*=login]").getAttribute("src"),n=o.split("/");e=(o=n.slice(0,n.length-3).join("/"))+"/api/v1/login"}let r=t.target.form;return fetch(e,{method:"POST",body:new URLSearchParams(new FormData(r))}).then(t=>{if(t.ok)return t.json();{let e=1*getParameterByName("failed"),o=window.location;e++,window.location=window.loginUrl+"?failed="+e+"&return="+o}}).then(t=>{let e="";t.return?e=t.return:null===(e=getParameterByName("return"))&&(e=window.location),t.extended&&console.log(t.extended),window.location=e}),!1}function login_dialog_shown(){$("[name=username]").focus()}function retryBootstrap(){if(void 0===$("#login-dialog").modal){window.setTimeout(retryBootstrap,100);return}$("#login-dialog").modal({show:!1,backdrop:"static"}),$("#login-dialog").on("shown.bs.modal",login_dialog_shown)}function doLoginInit(){let t=document.querySelector("ul a[href*=login]");null!==t&&(void 0!==window.browser_supports_cors&&browser_supports_cors()?(t.setAttribute("data-bs-toggle","modal"),t.setAttribute("data-bs-target","#login-dialog"),t.removeAttribute("href"),t.style.cursor="pointer",null!==(t=document.querySelector('#content a[href*="login"]'))&&(t.setAttribute("data-bs-toggle","modal"),t.setAttribute("data-bs-target","#login-dialog"),t.removeAttribute("href"),t.style.cursor="pointer")):t.setAttribute("href",t.getAttribute("href")+"?return="+document.URL));let e=document.getElementById("login_main_form");null!==e&&e.querySelector("button[type=submit]").addEventListener("click",loginSubmitted);let o=document.getElementById("login_dialog_form");null!==o&&o.querySelector("button[type=submit]").addEventListener("click",loginSubmitted);null!==document.getElementById("login-dialog")&&retryBootstrap()}function retryInit(){void 0!=$?$(doLoginInit):window.setTimeout(retryInit,200)}window.addEventListener("load",retryInit);