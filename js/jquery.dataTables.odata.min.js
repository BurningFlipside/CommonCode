function fnServerOData(a,l,d,b){var k={};$.each(l,function(m,n){k[n.name]=n.value});var f={"$format":"json"};var j=b.oInit.bUseODataViaJSONP;if(j){f.$callback="odatatable_"+(b.oFeatures.bServerSide?k.sEcho:("load_"+Math.floor((Math.random()*1000)+1)))}$.each(b.aoColumns,function(n,o){var m=(o.sName!==null&&o.sName!=="")?o.sName:((typeof o.mData==="string")?o.mData:null);if(m===null||!isNaN(Number(m))){m=o.sTitle}if(m===null||!isNaN(Number(m))){return}if(f.$select==null){f.$select=m}else{f.$select+=","+m}});if(b.oFeatures.bServerSide){f.$skip=b._iDisplayStart;if(b._iDisplayLength>-1){f.$top=b._iDisplayLength}if(b.oInit.iODataVersion!==null&&b.oInit.iODataVersion<4){f.$inlinecount="allpages"}else{f.$count=true}var c=[];var h=[];$.each(b.aoColumns,function(p,q){var o=q.sName||q.mData;var n=k["sSearch_"+p];if((k.sSearch!==null&&k.sSearch!==""||n!==null&&n!=="")&&q.bSearchable){switch(q.sType){case"string":case"html":if(k.sSearch!==null&&k.sSearch!==""){c.push("indexof(tolower("+o+"), '"+k.sSearch.toLowerCase()+"') gt -1")}if(n!==null&&n!==""){h.push("indexof(tolower("+o+"), '"+n.toLowerCase()+"') gt -1")}break;case"date":case"numeric":var m=(q.sType=="numeric")?function(i){return i}:function(i){switch(b.oInit.iODataVersion){case 4:return(new Date(i)).toISOString();case 3:return"datetimeoffset'"+(new Date(i)).toISOString()+"'";case 2:return"DateTime'"+(new Date(i)).toISOString()+"'"}};if(n!==null&&n!==""&&n!=="~"){asRanges=n.split("~");if(asRanges[0]!==""){h.push("("+o+" gt "+m(asRanges[0])+")")}if(asRanges[1]!==""){h.push("("+o+" lt "+m(asRanges[1])+")")}}break;default:}}});if(c.length>0){f.$filter=c.join(" or ")}if(h.length>0){if(f.$filter!==undefined){f.$filter=" ( "+f.$filter+" ) and ( "+h.join(" and ")+" ) "}else{f.$filter=h.join(" and ")}}var g=[];for(var e=0;e<k.iSortingCols;e++){g.push(k["mDataProp_"+k["iSortCol_"+e]]+" "+(k["sSortDir_"+e]||""))}if(g.length>0){f.$orderby=g.join()}}$.ajax(jQuery.extend({},b.oInit.ajax,{url:a,data:f,jsonp:j,dataType:j?"jsonp":"json",jsonpCallback:f["$callback"],cache:false,success:function(m){var i={};i.aaData=m.value||(m.d&&m.d.results)||m.d;var n=(m["@odata.count"])?m["@odata.count"]:((m["odata.count"])?m["odata.count"]:((m.__count)?m.__count:(m.d&&m.d.__count)));if(n==null){if(i.aaData.length===b._iDisplayLength){i.iTotalRecords=b._iDisplayStart+b._iDisplayLength+1}else{i.iTotalRecords=b._iDisplayStart+i.aaData.length}}else{i.iTotalRecords=n}i.iTotalDisplayRecords=i.iTotalRecords;d(i)}}))};